<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.100.2"><link rel=alternate type=application/rss+xml href=https://tsubasaxzzz.github.io/fta-hackon2022/docs/basic/index.xml><meta name=robots content="index, follow"><link rel="shortcut icon" href=/fta-hackon2022/favicons/favicon.ico><link rel=apple-touch-icon href=/fta-hackon2022/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/fta-hackon2022/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/fta-hackon2022/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/fta-hackon2022/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/fta-hackon2022/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/fta-hackon2022/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/fta-hackon2022/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/fta-hackon2022/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/fta-hackon2022/favicons/android-192x192.png sizes=192x192><title>Basic | KUSTO 100+ knocks</title><meta name=description content="You will learn the basics of KUSTO: filtering, sorting, and date-related queries."><meta property="og:title" content="Basic"><meta property="og:description" content="You will learn the basics of KUSTO: filtering, sorting, and date-related queries."><meta property="og:type" content="website"><meta property="og:url" content="https://tsubasaxzzz.github.io/fta-hackon2022/docs/basic/"><meta itemprop=name content="Basic"><meta itemprop=description content="You will learn the basics of KUSTO: filtering, sorting, and date-related queries."><meta name=twitter:card content="summary"><meta name=twitter:title content="Basic"><meta name=twitter:description content="You will learn the basics of KUSTO: filtering, sorting, and date-related queries."><link rel=preload href=/fta-hackon2022/scss/main.min.e42fbc313eb1919891fde4bb3bfbacc710b8890c78adce84a179ab0f4ff8977d.css as=style><link href=/fta-hackon2022/scss/main.min.e42fbc313eb1919891fde4bb3bfbacc710b8890c78adce84a179ab0f4ff8977d.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/fta-hackon2022/><span class=navbar-logo><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class=font-weight-bold>KUSTO 100+ knocks</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/fta-hackon2022/docs/><span class=active>Documents</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/fta-hackon2022/ja/docs/basic/>日本語</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/fta-hackon2022/ja/docs/basic/>日本語</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-fta-hackon2022docs-li><a href=/fta-hackon2022/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-fta-hackon2022docs><span>Documents</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-fta-hackon2022docsbasic-li><a href=/fta-hackon2022/docs/basic/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__section" id=m-fta-hackon2022docsbasic><span class=td-sidebar-nav-active-item>Basic</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-fta-hackon2022docsadvanced-li><a href=/fta-hackon2022/docs/advanced/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-fta-hackon2022docsadvanced><span>Advanced</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-fta-hackon2022docsportal-li><a href=https://portal.azure.com/#blade/Microsoft_Azure_Monitoring_Logs/DemoLogsBlade target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-fta-hackon2022docsportal><span>Try it in the demo workspace🔎</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/tsubasaxZZZ/fta-hackon2022/tree/main/content/en/docs/Basic/_index.md class=td-page-meta--view target=_blank rel=noopener><i class="fa fa-file-alt fa-fw"></i> View page source</a>
<a href=https://github.com/tsubasaxZZZ/fta-hackon2022/edit/main/content/en/docs/Basic/_index.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/tsubasaxZZZ/fta-hackon2022/new/main/content/en/docs/Basic/_index.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/tsubasaxZZZ/fta-hackon2022/issues/new?title=Basic" class=td-page-meta--issue target=_blank rel=noopener><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/tsubasaxZZZ/fta-hackon2022/issues/new class=td-page-meta--project-issue target=_blank rel=noopener><i class="fas fa-tasks fa-fw"></i> Create project issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a><ul><li><a href=#usage>Usage</a></li><li><a href=#term>Term</a></li><li><a href=#link>Link</a></li></ul></li><li><a href=#basic>Basic</a><ul><li><a href=#find-out-where-to-find-the-information>Find out where to find the information</a></li><li><a href=#format-data>Format data</a></li><li><a href=#specify-and-format-the-date>Specify and format the date</a></li><li><a href=#customize-output>Customize output</a></li><li><a href=#sort-and-aggregate-dataset>Sort and aggregate dataset</a></li><li><a href=#visualize>Visualize</a></li><li><a href=#cross-query>Cross query</a></li><li><a href=#other>Other</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://tsubasaxzzz.github.io/fta-hackon2022/docs/>Documents</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://tsubasaxzzz.github.io/fta-hackon2022/docs/basic/>Basic</a></li></ol></nav><div class=td-content><h1>Basic</h1><div class=lead>You will learn the basics of KUSTO: filtering, sorting, and date-related queries.</div><header class=article-meta></header><h1 id=kql-in-action>KQL in Action</h1><h2 id=introduction>Introduction</h2><h3 id=usage>Usage</h3><p>This is a collection of exercises, answers and explanations to help new KQL users learn how to write KQL.<br>By executing commands (operators, functions) that appear frequently in actual KQL usage situations from various angles and in various ways, the user is expected to learn the commands by hand.</p><h3 id=term>Term</h3><p>In KQL, as in any other programming language, each language element is given a name. Remembering these names is not mandatory, but it is a good thing to keep in mind in order to improve learning efficiency. Rather than simply lumping everything together as &ldquo;commands&rdquo;, you can quickly gain a better understanding of how KQL works by being aware of which elements you are currently using.</p><ul><li>Table operator: This is the most commonly used operator. It accepts table input and outputs a table. Elements that appear at the beginning of the process or next in the pipeline are table operators.</li><li>Scalar operators are mainly used within table operators. They include numerical, logical, and string operators, and perform data processing such as the value of a particular column in each row of a table. It is difficult to distinguish between and not-between from the functions described below, but between and not-between are scalar operators.</li><li>Function: The meaning is the same, it returns a specific result. Some functions perform processing on input values, while others return values without taking input values. Note that they are similar to scalar operators.</li></ul><h3 id=link>Link</h3><ul><li><p><a href=https://ms.portal.azure.com/#blade/Microsoft_Azure_Monitoring_Logs/DemoLogsBlade>Log Analytics DEMO workspace</a><br>This is a demo workspace with sample data. The KQL on this page is intended to be run against this data.</p></li><li><p><a href=https://docs.microsoft.com/ja-jp/azure/data-explorer/kusto/query/>Kusto Query Language</a><br>This is the reference for KQL in Azure Data Explorer, of which Log Analytics is a partial implementation.</p></li></ul><h2 id=basic>Basic</h2><h3 id=find-out-where-to-find-the-information>Find out where to find the information</h3><p>To search the Azure Monitor logs, you need to know what tables are in the workspace and what structure each table contains records. Here you will learn how to use basic operators to find tables that contain the information you are looking for, and how to examine the structure of the data contained in the tables you locate, using the most commonly used tables as the subject matter.</p><div><details><summary>Search for records containing contoso</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>search</span> <span style=color:#e6db74>&#34;contoso&#34;</span>
</span></span></code></pre></div></p><p>Description :<br>The search operator performs a search on all tables in the workspace if no table is specified.<br>The search operator can be used when you do not know which table contains the data you want, or when you do not know if the data exists in the workspace in the first place.<br>It should not be used too often for queries that are executed periodically, as it has a performance disadvantage when searching large amounts of data.
It is also not available in some Kusto execution environments. For example, it can be used in Log Analytics, but not in Azure Resource Graph.</p></details></div><div><details><summary>Please search for records that contain both contoso and retail.</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// Prefered
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>search</span> <span style=color:#e6db74>&#34;contoso&#34;</span> <span style=color:#a6e22e>and</span> <span style=color:#e6db74>&#34;retail&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// NOT Prefered
</span></span></span><span style=display:flex><span><span style=color:#75715e>// search &#34;contoso&#34; | search &#34;retail&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>// search &#34;contoso&#34; | where Name contains &#34;retail&#34;
</span></span></span></code></pre></div></p><p>Description :<br>The search operator can generate many results, which affects performance. If multiple conditions need to be specified, they should be included in a single search operator condition. Piping multiple search operators or filtering search operator results by where will result in a large result set being generated by the previous search operator for intermediate processing. In contrast, a single search operator with multiple conditions will generate a smaller result set.</p></details></div><div><details><summary>Show records containing Contoso starting with a capital letter</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>search</span> <span style=color:#a6e22e>kind</span><span style=color:#f92672>=</span><span style=color:#a6e22e>case_sensitive</span> <span style=color:#e6db74>&#34;Contoso&#34;</span>
</span></span></code></pre></div></p><p>Description :<br>The search operator performs case-insensitive searches by default, but you can explicitly specify the behavior with the kind argument. case_sensitive is a case-sensitive specification.</p></details></div><div><details><summary>Show records containing contosohotels from the Perf table</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>search</span> <span style=color:#66d9ef>in</span> (<span style=color:#a6e22e>Perf</span>) <span style=color:#e6db74>&#34;contosohotels&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// able to search piped Table
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>Perf</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>search</span> <span style=color:#e6db74>&#34;contosohotels&#34;</span>
</span></span></code></pre></div></p><p>Description :<br>The search operator can also perform searches on tables received from a pipe. The value of the &ldquo;in&rdquo; argument specifies the table to be searched. &ldquo;search&rdquo; operator can also perform searches on tables received from a pipe.</p></details></div><div><details><summary>Show records from the SecurityEvent table that contain contosohotels.</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>search</span> <span style=color:#66d9ef>in</span> (<span style=color:#a6e22e>SecurityEvent</span>) <span style=color:#e6db74>&#34;contosohotels&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// able to search piped Table
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>SecurityEvent</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>search</span> <span style=color:#e6db74>&#34;contosohotels&#34;</span>
</span></span></code></pre></div></p><p>Description :<br>This example is almost identical to the one before. It is provided to help you understand that records with the same string may exist in more than one table.</p></details></div><div><details><summary>Display records from the Alert and SecurityAlert tables that contain contosohotels</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>search</span> <span style=color:#66d9ef>in</span> (<span style=color:#a6e22e>Alert</span>,<span style=color:#a6e22e>SecurityAlert</span>) <span style=color:#e6db74>&#34;contosohotels&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Other expression
</span></span></span><span style=display:flex><span><span style=color:#75715e>// Need to combine multiple tables
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>Alert</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>union</span> <span style=color:#a6e22e>SecurityAlert</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>search</span> <span style=color:#e6db74>&#34;contosohotels&#34;</span>
</span></span></code></pre></div></p><p>Description :<br>The &ldquo;in&rdquo; argument allows multiple tables to be specified. In this example, the search is performed across tables with potentially related information. An additional example is the &ldquo;union&rdquo; of multiple tables, since KQL does not allow multiple tables to be passed through the pipeline.</p></details></div><div><details><summary><strong>[IMPORTANT] Please list the tables in your workspace</strong>.</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>search</span> <span style=color:#f92672>*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>distinct</span> <span style=color:#a6e22e>$table</span>
</span></span></code></pre></div></p><p>Description :<br><p>KQL usually performs searches by specifying tables, it is necessary to know what tables are in the workspace.
The search results of the search operator include a $table column representing the table to which it belongs, it is possible to list all tables contained in the workspace by extracting unique values with the distinct operator.</p><p>It is very time consuming to check the existing tables from the UI, this example is provided as a simple way to check only the table names.</p></p></details></div><div><details><summary>Show 10 records in the AzureDiagnostics table</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureDiagnostics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>take</span> <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// limit and take is same 
</span></span></span><span style=display:flex><span><span style=color:#75715e>//AzureDiagnostics
</span></span></span><span style=display:flex><span><span style=color:#75715e>//| limit 10
</span></span></span></code></pre></div></p><p>Description :<br>AzureDiagnostics stores Azure diagnostic logs, which contain a large number of records. The limit operator works the same way as take.
take does not always return the same result. For example, the latest data may not be taken in chronological order, and the result may differ from the previous run even if the data set remains the same.</p></details></div><div><details><summary>List the Category in the AzureDiagnostics table</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureDiagnostics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span><span style=color:#a6e22e>distinct</span> <span style=color:#a6e22e>Category</span>
</span></span></code></pre></div></p><p>Description :<br>The diagnostic logs contained in the AzureDiagnostics table consist of logs from multiple resources. Since logs from dozens of different resources are typically aggregated, it is important to understand what resources&rsquo; logs are included.<br>Since the Category column contains hints about the resource that generated the log and the type of log, it is easy to determine the presence or absence of the desired log by listing the Category values in the distinguishing operator.</p></details></div><div><details><summary>List the ResourceType and Category combinations from the AzureDiagnostics table</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureDiagnostics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span><span style=color:#a6e22e>distinct</span> <span style=color:#a6e22e>ResourceType</span>,<span style=color:#a6e22e>Category</span>
</span></span></code></pre></div></p><p>Description :<br>Since AzureDiagnostics&rsquo; ResourceType contains the type of the resource that generated the log, it can be combined with Category and distinct to show clearly which resource is generating which category of logs.</p></details></div><div><details><summary>View ApplicationGatewayAccessLog from the AzureDiagnostics table&lt;</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureDiagnostics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span><span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Category</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;ApplicationGatewayAccessLog&#34;</span>
</span></span></code></pre></div></p><p>Description :<br>The where operator is a filter that selects records according to given criteria; since each type of log in the AzureDiagnostics table has a different Category column value, you can filter by Category column value to select only the desired resource and desired type of log. The following table shows the number of items that can be selected.</p></details></div><div><details><summary>ApplicationGatewayAccessLog from the AzureDiagnostics table in order of newest to oldest record</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureDiagnostics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span><span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Category</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;ApplicationGatewayAccessLog&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span><span style=color:#a6e22e>sort</span> <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#a6e22e>desc</span> 
</span></span></code></pre></div></p><p>Description :<br>Filtered logs are not always arranged in the order expected by the query executor. In particular, they are often expected to be arranged according to chronological order, but this is often not the case.
The sort operator sorts records by the specified column values. By default, it sorts in descending order. In this example, the desc argument is specified to explicitly sort in descending order, but it can be omitted.</p></details></div><div><details><summary>Display ApplicationGatewayAccessLog from AzureDiagnostics table in order of oldest to newest record</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureDiagnostics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span><span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Category</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;ApplicationGatewayAccessLog&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span><span style=color:#a6e22e>sort</span> <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#a6e22e>asc</span> 
</span></span></code></pre></div></p><p>Description :<br>To sort in ascending order with the sort operator, specify the asc argument.</p></details></div><div><details><summary>Display the ApplicationGatewayAccessLog from the AzureDiagnostics table, sorted by most recent record (10)</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureDiagnostics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span><span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Category</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;ApplicationGatewayAccessLog&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span><span style=color:#a6e22e>top</span> <span style=color:#ae81ff>10</span> <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#a6e22e>desc</span> 
</span></span></code></pre></div></p><p>Description :<br>The top operator is used to sort records by the column value specified in the by argument. top, like sort, sorts records in descending order by default, and in this example, desc is specified explicitly.</p></details></div><div><details><summary>Display the ApplicationGatewayAccessLog from the AzureDiagnostics table in order of oldest to newest record (10)</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureDiagnostics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span><span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Category</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;ApplicationGatewayAccessLog&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span><span style=color:#a6e22e>top</span> <span style=color:#ae81ff>10</span> <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#a6e22e>asc</span> 
</span></span></code></pre></div></p><p>Description :<br>The top operator, like sort, can also perform ascending sorting with an asc argument.</p></details></div><div><details><summary>Display 10 records in the AzureMetrics table</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureMetrics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>take</span> <span style=color:#ae81ff>10</span>
</span></span></code></pre></div></p><p>Description :<br>The AzureMetrics table is a table that holds metrics for Azure resources. If metrics are enabled in the diagnostic settings for a resource, information is stored in this table.
Metrics are like performance counters in Windows and are used to measure numerical aspects of a resource.</p></details></div><div><details><summary>List the MetricName in the AzureMetrics table</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureMetrics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>distinct</span> <span style=color:#a6e22e>MetricName</span>
</span></span></code></pre></div></p><p>Description :<br>The AzureMetrics table receives metrics from various resources. Each metric has a field called MetricName that identifies which metric a given record is data for.</p></details></div><div><details><summary>List the ResourceProvider and MetricName combinations in the AzureMetrics table</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureMetrics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>distinct</span> <span style=color:#a6e22e>ResourceProvider</span>,<span style=color:#a6e22e>MetricName</span>
</span></span></code></pre></div></p><p>Description :<br>Since there are quite a few different types of metrics, it is helpful to use the information of the resource provider from which they are generated when listing them.
Viewing unique combinations of ResourceProvider and MetricName in the distinct operator allows you to organize the metrics generated by each resource provider.</p></details></div><div><details><summary>Display only the Percentage CPU metric from the AzureMetrics table</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>  <span style=color:#a6e22e>AzureMetrics</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>MetricName</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Percentage CPU&#34;</span>
</span></span></code></pre></div></p><p>Description :<br>To display a specific metric, specify any MetricName in the where operator.</p></details></div><div><details><summary>Display the Percentage CPU of computer CH1-SQLVM12 from the AzureMetrics table</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureMetrics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Resource</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;CH1-SQLVM12&#34;</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>MetricName</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Percentage CPU&#34;</span>
</span></span></code></pre></div></p><p>Description :<br>The where operator can filter records by multiple criteria. Resource name and metric can be used to display only any metric for a specific resource.</p></details></div><div><details><summary>Show 10 records in the AzureActivity table</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureActivity</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>take</span> <span style=color:#ae81ff>10</span>
</span></span></code></pre></div></p><p>Description :<br>This example may not work in the demo workspace, so please try it in your Log Analytics workspace.
[Ref:Send to Log Analytics workspace] Send to Log Analytics workspace (<a href=https://docs.microsoft.com/azure/azure-monitor/essentials/activity-log#send-to-log-analytics->https://docs.microsoft.com/azure/azure-monitor/essentials/activity-log#send-to-log-analytics-</a>) workspace)
The AzureActivity table records operations on subscriptions, such as changing resources or starting virtual machines.
You can check the change work and see if any changes have been made to unnecessary resources.</p></details></div><div><details><summary>List the resources and operations that have been operated on in the AzureActivity table</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureActivity</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>distinct</span> <span style=color:#a6e22e>ResourceProviderValue</span>,<span style=color:#a6e22e>_ResourceId</span>, <span style=color:#a6e22e>OperationNameValue</span>
</span></span></code></pre></div></p><p>Description :<br>_ResourceId is the unique identifier of the resource and ResourceProviderValue represents the resource provider. This query allows you to see what operations have been performed on each resource, organized by provider.</p></details></div><div><details><summary>Display a list of users and IP addresses that have performed operations from the AzureActivity table</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>  <span style=color:#a6e22e>AzureActivity</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>|</span> <span style=color:#a6e22e>distinct</span> <span style=color:#a6e22e>Caller</span>,<span style=color:#a6e22e>CallerIpAddress</span>
</span></span></code></pre></div></p><p>Description :<br>Caller is the user who performed the execution, and CallerIpAddress is the IP address of the source of the operation. This can be used to check for operations from unintended users or locations.</p></details></div><div><details><summary>List of users who have performed operations in the Administrative category in the AzureActivity table</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureActivity</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>CategoryValue</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Administrative&#34;</span>   
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>distinct</span> <span style=color:#a6e22e>Caller</span>
</span></span></code></pre></div></p><p>Description :<br>Administrative work includes the value Administrative in CategoryValue.</p></details></div><div><details><summary>List the users whose administrative tasks failed from the AzureActivity table and the resources on which they operated</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureActivity</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>ActivityStatusValue</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Failure&#34;</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>CategoryValue</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Administrative&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>distinct</span> <span style=color:#a6e22e>Caller</span>,<span style=color:#a6e22e>CallerIpAddress</span>, <span style=color:#a6e22e>_ResourceId</span>
</span></span></code></pre></div></p><p>Description :<br>An entry whose operation failed will have an ActivityStatusValue of Failure. This query allows you to view users who have attempted and failed administrative tasks.
Reasons for failure vary, but for example, an unusual CallerIpAddress may indicate a security breach.</p></details></div><h4 id=reference>Reference</h4><ul><li>Common and service-specific schemas for Azure resource logs<ul><li><a href=https://docs.microsoft.com/azure/azure-monitor/essentials/resource-logs-schema>https://docs.microsoft.com/azure/azure-monitor/essentials/resource-logs-schema</a></li></ul></li><li>Azure Activity Log event schema<ul><li><a href=https://docs.microsoft.com/azure/azure-monitor/essentials/activity-log-schema>https://docs.microsoft.com/azure/azure-monitor/essentials/activity-log-schema</a></li></ul></li><li>search operator<ul><li><a href="https://docs.microsoft.com/azure/data-explorer/kusto/query/searchoperator?pivots=azuredataexplorer">https://docs.microsoft.com/azure/data-explorer/kusto/query/searchoperator?pivots=azuredataexplorer</a></li></ul></li><li>distinct operator<ul><li><a href=https://docs.microsoft.com/azure/data-explorer/kusto/query/distinctoperator>https://docs.microsoft.com/azure/data-explorer/kusto/query/distinctoperator</a></li></ul></li><li>where operator<ul><li><a href=https://docs.microsoft.com/azure/data-explorer/kusto/query/whereoperator>https://docs.microsoft.com/azure/data-explorer/kusto/query/whereoperator</a></li></ul></li></ul><h3 id=format-data>Format data</h3><div><details><summary>Parse a resource ID</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureDiagnostics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>ResourceType</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;SERVERS/DATABASES&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>parse</span> <span style=color:#a6e22e>ResourceId</span> <span style=color:#66d9ef>with</span> <span style=color:#f92672>*</span> <span style=color:#e6db74>&#34;/RESOURCEGROUPS/&#34;</span> <span style=color:#a6e22e>ResourceGroupName</span> <span style=color:#e6db74>&#34;/&#34;</span> <span style=color:#f92672>*</span> <span style=color:#e6db74>&#34;/DATABASES/&#34;</span> <span style=color:#a6e22e>Databasename</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#a6e22e>Category</span>, <span style=color:#a6e22e>OperationName</span>, <span style=color:#a6e22e>ResourceGroupName</span>, <span style=color:#a6e22e>Databasename</span> 
</span></span></code></pre></div></p><p>Description :<br>Use the <code>parse</code> operator to extract the resource group and resource name from the resource id field</p></details></div><div><details><summary>Parse a string in syslog</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Syslog</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Facility</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;authpriv&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>parse</span> <span style=color:#a6e22e>SyslogMessage</span> <span style=color:#66d9ef>with</span> <span style=color:#f92672>*</span> <span style=color:#e6db74>&#34;(&#34;</span> <span style=color:#a6e22e>session</span> <span style=color:#e6db74>&#34;):&#34;</span> <span style=color:#f92672>*</span> <span style=color:#e6db74>&#34;user&#34;</span> <span style=color:#a6e22e>UserName</span>
</span></span></code></pre></div></p><p>Description :<br>Use the <code>parse</code> command to extract a string value consistently from a log string entry</p></details></div><div><details><summary>Return specific columns from a query</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>VMComputer</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>arg_max</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#f92672>*</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>extend</span> <span style=color:#a6e22e>IPAddress</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>tostring</span>(<span style=color:#a6e22e>Ipv4Addresses</span>[<span style=color:#ae81ff>0</span>])
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>extend</span> <span style=color:#a6e22e>DNSNAme</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>tostring</span>(<span style=color:#a6e22e>DnsNames</span>[<span style=color:#ae81ff>0</span>])
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>BootTime</span>, <span style=color:#a6e22e>IPAddress</span>, <span style=color:#a6e22e>DNSNAme</span>, <span style=color:#a6e22e>OperatingSystemFullName</span>, <span style=color:#a6e22e>PhysicalMemoryMB</span>, <span style=color:#a6e22e>Cpus</span>, <span style=color:#a6e22e>CpuSpeed</span>, <span style=color:#a6e22e>AzureResourceGroup</span>, <span style=color:#a6e22e>AzureSubscriptionId</span>
</span></span></code></pre></div></p><p>Description :<br>Use the <code>project</code> operator to return very specific columns from a query</p></details></div><div><details><summary>Exclude a specific column from the query result</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>SecurityEvent</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>count</span>() <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>EventID</span>, <span style=color:#a6e22e>Activity</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span><span style=color:#f92672>-</span><span style=color:#a6e22e>away</span> <span style=color:#a6e22e>EventID</span>
</span></span></code></pre></div></p><p>Description :<br>Use the <code>project-away</code> operator to exclude a specific column from the query result</p></details></div><h3 id=specify-and-format-the-date>Specify and format the date</h3><p>Azure Monitor logs have a standard defined column, the <code>TimeGenerated</code> column, which indicates the time generated by the data source, allowing you to see the time of the log record. Using the <code>TimeGenerated</code> column, you can filter based on time and the number of records.</p><div><details><summary>Display the current date in UTC time</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>print</span> <span style=color:#a6e22e>now</span>()
</span></span></code></pre></div></p><p>Description :<br>The current time can be obtained using the <code>now()</code> function. The return value of any date or time function, including the <code>now()</code> function, is of type <code>datetime</code> and is expressed in UTC time in Kusto.</p></details></div><div><details><summary>Display a specific date and time (&ldquo;January 1, 2022 12:00&rdquo;) in UTC time</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>print</span> <span style=color:#a6e22e>datetime</span>(<span style=color:#e6db74>&#34;2022-01-01 12:00&#34;</span>)
</span></span></code></pre></div></p><p>Description :<br>The <code>datetime</code> function allows you to retrieve a date or time by specifying a string. The return value of the <code>datetime</code> function can be obtained as type <code>datetime</code>.</p></details></div><div><details><summary>Display a specific date and time (&ldquo;January 1, 2022, 12:00&rdquo;) in UTC+9 hours.</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>print</span> <span style=color:#a6e22e>datetime</span>(<span style=color:#e6db74>&#34;2022-01-01 12:00&#34;</span>) <span style=color:#f92672>+</span> <span style=color:#ae81ff>9</span><span style=color:#a6e22e>h</span>
</span></span></code></pre></div></p><p>Description :<br>The <code>datetime</code> type returned by the <code>datetime</code> function is treated in UTC time. To change UTC time to another time zone, add (or subtract) the time to the value of type <code>datetime</code>. To add to or subtract from a <code>datetime</code> type, use a value of type <code>timespan</code>. Use notation such as <code>9h</code> (9 hours) or <code>30m</code> (30 minutes), as in this query.</p></details></div><div><details><summary>Display the date and time 30 minutes before the current date and time in UTC+9 hours</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>print</span> <span style=color:#a6e22e>datetime</span>(<span style=color:#e6db74>&#34;now&#34;</span>) <span style=color:#f92672>+</span> <span style=color:#ae81ff>9</span><span style=color:#a6e22e>h</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>30</span><span style=color:#a6e22e>m</span>
</span></span></code></pre></div></p><p>Description :<br>You can specify a time in the past or future by adding or subtracting against the <code>datetime</code> type. Addition to or subtraction from a <code>datetime</code> type can use values of type <code>timespan</code>.</p></details></div><div><details><summary>Search for records in UTC time for a specific period of time (only one day, &ldquo;January 1, 2022&rdquo;)</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Alert</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#a6e22e>between</span> (<span style=color:#a6e22e>datetime</span>(<span style=color:#e6db74>&#34;2022-01-01 00:00:00&#34;</span>)..<span style=color:#ae81ff>1</span><span style=color:#a6e22e>day</span>)
</span></span></code></pre></div></p><p>Description :<br>When checking logs output by Azure services for troubleshooting, etc., you may want to check logs for a specific day. You can use the <code>between</code> and <code>datetime</code> functions in combination for a <code>TimeGenerated</code> column to limit the time range.</p></details></div><div><details><summary>Search for records in UTC time for a specific period of time (&ldquo;January 1, 2022&rdquo; to &ldquo;January 2, 2022&rdquo;)</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Alert</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#a6e22e>between</span> (<span style=color:#a6e22e>datetime</span>(<span style=color:#e6db74>&#34;2022-01-01 00:00:00&#34;</span>)..<span style=color:#a6e22e>datetime</span>(<span style=color:#e6db74>&#34;2022-01-02 23:59:59&#34;</span>))
</span></span></code></pre></div></p><p>Description :<br>The <code>datetime</code> function can be used at the beginning and end of the range of the <code>between</code> function to make the range include a specific date and time.</p></details></div><div><details><summary>Search for records in UTC time for a specific period of time (&ldquo;January 1, 2022 12:00&rdquo; to &ldquo;January 2, 2022 12:00&rdquo;)</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Alert</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#a6e22e>between</span> (<span style=color:#a6e22e>datetime</span>(<span style=color:#e6db74>&#34;2022-01-01 12:00&#34;</span>)..<span style=color:#a6e22e>datetime</span>(<span style=color:#e6db74>&#34;2022-01-02 12:59&#34;</span>))
</span></span></code></pre></div></p><p>Description :<br>At the beginning and end of the range of the <code>between</code> function, the <code>datetime</code> function can be used to specify a range of dates and times for the <code>datetime</code> function. The <code>datetime</code> function accepts a variety of date expressions as arguments.</p></details></div><div><details><summary>Search today&rsquo;s records in UTC time</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Alert</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>startofday</span>(<span style=color:#a6e22e>now</span>())
</span></span></code></pre></div></p><p>Description :<br>Comparison operators can be used on the <code>TimeGenerated</code> type to represent different ranges of time. The <code>startofday</code> function returns a value of type <code>datetime</code> representing the start of the date given as argument. That is, &ldquo;2022-01-01 12:34&rdquo; represents &ldquo;2022-01-01 0:00:00.000&rdquo;.</p></details></div><div><details><summary>Find this month&rsquo;s record in UTC time</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Alert</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>startofweek</span>(<span style=color:#a6e22e>now</span>())
</span></span></code></pre></div></p><p>Description :<br></p></details></div><div><details><summary>Search records from 3 days ago to the present</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Alert</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span>(<span style=color:#ae81ff>3</span><span style=color:#a6e22e>day</span>)
</span></span></code></pre></div></p><p>Description :<br>The <code>ago</code> function returns a value of type <code>datetime</code> representing the specified date and time before the current time. That is, <code>ago(3d)</code> represents the time three days before the current time. In addition to dates, you can specify other time units such as <code>1m</code> or <code>1h</code>!</p></details></div><div><details><summary>Search for records in the last 30 minutes</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Alert</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span>(<span style=color:#ae81ff>30</span><span style=color:#a6e22e>m</span>)
</span></span></code></pre></div></p><p>Description :<br></p></details></div><div><details><summary>Search records for the past 1.5 hours</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Alert</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span>(<span style=color:#ae81ff>1.5</span><span style=color:#a6e22e>h</span>)
</span></span></code></pre></div></p><p>Description :<br></p></details></div><div><details><summary>Search records from 2 to 3 days ago</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Alert</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#a6e22e>between</span> (<span style=color:#a6e22e>now</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>3</span><span style=color:#a6e22e>d</span>)..<span style=color:#ae81ff>1</span><span style=color:#a6e22e>day</span>)
</span></span></code></pre></div></p><p>Description :<br>The <code>now</code> function accepts an offset of type <code>timespan</code> as an argument. When combined with the <code>between</code> function, various time ranges can be represented. This query produces the same result as <code>now(-3d)</code> as <code>ago(3d)</code>.</p></details></div><div><details><summary>Search by local time zone</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Alert</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>startofday</span>(<span style=color:#a6e22e>now</span>()) <span style=color:#f92672>-</span> <span style=color:#ae81ff>9</span><span style=color:#a6e22e>h</span>
</span></span></code></pre></div></p><p>Description :<br>The <code>TimeGenerated</code> and <code>startofday</code> functions are expressed in UTC time. Therefore, time zone must be taken into account when filtering by local time.</p></details></div><div><details><summary>Add the difference between the time of record and the current time as a column</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Alert</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span>(<span style=color:#ae81ff>30</span><span style=color:#a6e22e>m</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>extend</span> <span style=color:#a6e22e>timeAgo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>now</span>() <span style=color:#f92672>-</span> <span style=color:#a6e22e>TimeGenerated</span> 
</span></span></code></pre></div></p><p>Description :<br>In a table containing access logs, etc., you may want to check the difference between the time of the record and the current time. Using <code>extend</code> and the time function, you can add a new column and output the time difference.</p></details></div><div><details><summary>Group the records for the week (from Sunday to the current time) by day and display the number of records per day</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureDiagnostics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>startofweek</span>(<span style=color:#a6e22e>now</span>())
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>count</span>() <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>startofday</span>(<span style=color:#a6e22e>TimeGenerated</span>)
</span></span></code></pre></div></p><p>Description :<br>The <code>summarize</code> function is often combined with the time function. It is useful when aggregating access logs, for example.</p></details></div><div><details><summary>Group records from the past 30 minutes by minute and display the number of records per minute</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureDiagnostics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>ago</span>(<span style=color:#ae81ff>30</span><span style=color:#a6e22e>m</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>count</span>() <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>bin</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#ae81ff>1</span><span style=color:#a6e22e>m</span>)
</span></span></code></pre></div></p><p>Description :<br>Combining the <code>summarize</code> function with the <code>bin</code> function and the time function allows more flexible aggregation for dates. The <code>bin</code> function is an alias for the <code>floor</code> function.</p></details></div><h4 id=reference-1>Reference</h4><ul><li>Date and time operations<ul><li><a href="https://docs.microsoft.com/azure/data-explorer/kusto/query/samples?pivots=azuremonitor#date-and-time-operations">https://docs.microsoft.com/azure/data-explorer/kusto/query/samples?pivots=azuremonitor#date-and-time-operations</a></li></ul></li><li>Azure Monitor TimeGenerated<ul><li><a href=https://docs.microsoft.com/azure/azure-monitor/logs/log-standard-columns#timegenerated>https://docs.microsoft.com/azure/azure-monitor/logs/log-standard-columns#timegenerated</a></li></ul></li><li>Log query scope and time range in Azure Monitor Log Analytics<ul><li><a href=https://docs.microsoft.com/azure/azure-monitor/logs/scope#time-range>https://docs.microsoft.com/azure/azure-monitor/logs/scope#time-range</a></li></ul></li><li>The datetime data type<ul><li><a href=https://docs.microsoft.com/azure/data-explorer/kusto/query/scalar-data-types/datetime>https://docs.microsoft.com/azure/data-explorer/kusto/query/scalar-data-types/datetime</a></li></ul></li><li>The timespan data type<ul><li><a href=https://docs.microsoft.com/azure/data-explorer/kusto/query/scalar-data-types/timespan>https://docs.microsoft.com/azure/data-explorer/kusto/query/scalar-data-types/timespan</a></li></ul></li></ul><h3 id=customize-output>Customize output</h3><div><details><summary>Using project to show one or more columns exclusively</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Heartbeat</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span> (<span style=color:#ae81ff>5</span><span style=color:#a6e22e>m</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>TimeGenerated</span>
</span></span></code></pre></div></p><p>Description :<br>This query can be used to select one or more columns to show exclusively in the results (Computer and TimeGenerated).</p></details></div><div><details><summary>Using project to rename a column</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Heartbeat</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span> (<span style=color:#ae81ff>5</span><span style=color:#a6e22e>m</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>VM</span><span style=color:#f92672>=</span><span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>TimeStamp</span><span style=color:#f92672>=</span><span style=color:#a6e22e>TimeGenerated</span>
</span></span></code></pre></div></p><p>Description :<br>This query can be used to select one or more columns to show exclusively in the results and rename the column(s)</p></details></div><div><details><summary>Using project to rename a column with a name with spaces</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Heartbeat</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span> (<span style=color:#ae81ff>5</span><span style=color:#a6e22e>m</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> [<span style=color:#e6db74>&#39;Virtual Machine&#39;</span>]<span style=color:#f92672>=</span><span style=color:#a6e22e>Computer</span>, [<span style=color:#e6db74>&#39;Time Stamp&#39;</span>]<span style=color:#f92672>=</span><span style=color:#a6e22e>TimeGenerated</span>
</span></span></code></pre></div></p><p>Description :<br>This query can be used to select one or more columns to show exclusively in the results and rename the column(s)</p></details></div><div><details><summary>Using Project and an expression to create columns.</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Heartbeat</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span> (<span style=color:#ae81ff>5</span><span style=color:#a6e22e>m</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>VM</span><span style=color:#f92672>=</span><span style=color:#a6e22e>toupper</span>(<span style=color:#a6e22e>Computer</span>), <span style=color:#a6e22e>TimeStamp</span><span style=color:#f92672>=</span><span style=color:#a6e22e>datetime_add</span>(<span style=color:#e6db74>&#34;Hour&#34;</span>,<span style=color:#ae81ff>5</span>,<span style=color:#a6e22e>TimeGenerated</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// simplified expression
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>Heartbeat</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span> (<span style=color:#ae81ff>5</span><span style=color:#a6e22e>m</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>VM</span><span style=color:#f92672>=</span><span style=color:#a6e22e>toupper</span>(<span style=color:#a6e22e>Computer</span>), <span style=color:#a6e22e>TimeStamp</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>5</span><span style=color:#a6e22e>h</span>
</span></span></code></pre></div></p><p>Description :<br>This query can be used to created columns based on expressions.</p></details></div><div><details><summary>Using project-away to remove columns.</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Heartbeat</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span> (<span style=color:#ae81ff>5</span><span style=color:#a6e22e>m</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span><span style=color:#f92672>-</span><span style=color:#a6e22e>away</span> <span style=color:#a6e22e>VMUUID</span>, <span style=color:#a6e22e>MG</span>, <span style=color:#a6e22e>ManagementGroupName</span>, <span style=color:#a6e22e>SourceComputerId</span>
</span></span></code></pre></div></p><p>Description :<br>This query can be used to exclude certain columns from the queries</p></details></div><div><details><summary>Using project-away to remove columns based on a pattern</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Heartbeat</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span> (<span style=color:#ae81ff>5</span><span style=color:#a6e22e>m</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span><span style=color:#f92672>-</span><span style=color:#a6e22e>away</span> <span style=color:#a6e22e>Resource</span><span style=color:#f92672>*</span>
</span></span></code></pre></div></p><p>Description :<br>This query can be used to exclude certain columns from the queries and exclude columns that match the pattern</p></details></div><div><details><summary>Using project-keep to select which columns to show in the results.</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Heartbeat</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span> (<span style=color:#ae81ff>5</span><span style=color:#a6e22e>m</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span><span style=color:#f92672>-</span><span style=color:#a6e22e>keep</span> <span style=color:#a6e22e>Resource</span><span style=color:#f92672>*</span>
</span></span></code></pre></div></p><p>Description :<br>This query can be used to select columns to be shown in the output. Can&rsquo;t be used to create expression based columns. See <code>project</code> for that purpose.</p></details></div><div><details><summary>Using project-reorder to establish the order of the columns.</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Heartbeat</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span> (<span style=color:#ae81ff>5</span><span style=color:#a6e22e>m</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span><span style=color:#f92672>-</span><span style=color:#a6e22e>reorder</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>desc</span>
</span></span></code></pre></div></p><p>Description :<br>This query example shows how to reorder (all) columns in descendant fashion</p></details></div><div><details><summary>Using project-rename to change a column&rsquo;s name.</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Heartbeat</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span> (<span style=color:#ae81ff>5</span><span style=color:#a6e22e>m</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span><span style=color:#f92672>-</span><span style=color:#a6e22e>rename</span> <span style=color:#a6e22e>VM</span><span style=color:#f92672>=</span><span style=color:#a6e22e>Compute</span>
</span></span></code></pre></div></p><p>Description :<br>This query shows how to rename one or more columns in the results. Project-rename won&rsquo;t affect filtering over columns.</p></details></div><div><details><summary>Using Extend to create calculated columns</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Heartbeat</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>extend</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Age</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>now</span>() <span style=color:#f92672>-</span> <span style=color:#a6e22e>TimeGenerated</span>
</span></span></code></pre></div></p><p>Description :<br>This query can be used to create a new column based on an expression</p></details></div><div><details><summary>Using Extend to create calculated columns using a condition (and visuals)</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Heartbeat</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>LastReported</span><span style=color:#f92672>=</span><span style=color:#a6e22e>now</span>()<span style=color:#f92672>-</span><span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>TimeGenerated</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>,<span style=color:#a6e22e>TimeGenerated</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>extend</span> <span style=color:#a6e22e>RecentHeartBeat</span><span style=color:#f92672>=</span><span style=color:#a6e22e>iff</span>(<span style=color:#a6e22e>TimeGenerated</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ago</span>(<span style=color:#ae81ff>5</span><span style=color:#a6e22e>m</span>),<span style=color:#e6db74>&#39;✔️ &#39;</span>, <span style=color:#e6db74>&#39;❌ &#39;</span>)
</span></span></code></pre></div></p><p>Description :<br>This query can be used to create a new column based on a condition and display a visual clue.</p></details></div><h3 id=sort-and-aggregate-dataset>Sort and aggregate dataset</h3><div><details><summary>Count the number of performance counters collected per computer</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>InsightsMetrics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>count</span>() <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>Namespace</span>, <span style=color:#a6e22e>Name</span>
</span></span></code></pre></div></p><p>Description :<br>Count the number of performance counters collected per computer</p></details></div><div><details><summary>Please tally how many different performance counters are available for each computer</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>InsightsMetrics</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>dcount</span>(<span style=color:#a6e22e>Name</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>
</span></span></code></pre></div></p><p>Description :<br>The <code>dcount()</code> function is an aggregate function that calculates the number of unique values in a given column. In this example it is the name of the performance counters collected from the computer, but it can be used for a variety of aggregates, such as the number of locations where a user is logged in, the number of IPs to which the computer has ever connected, etc.</p></details></div><div><details><summary>Please tabulate the average UtilizationPercentage of the computers</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>InsightsMetrics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Name</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;UtilizationPercentage&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>avg</span>(<span style=color:#a6e22e>Val</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>
</span></span></code></pre></div></p><p>Description :<br>Changing the aggregation function given to the <code>summarize</code> operator changes the aggregation method. By giving the target column name to the <code>avg()</code> function, you can compute the average of the column values.</p></details></div><div><details><summary>Tabulate the average UtilizationPercentage of the computers</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>InsightsMetrics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Name</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;UtilizationPercentage&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>Val</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>
</span></span></code></pre></div></p><p>Description :<br>You can compute the maximum value of a column value by giving the target column name to the <code>max()</code> function.</p></details></div><div><details><summary>Please provide an hourly trend of the average UtilizationPercentage by computer.</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>InsightsMetrics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Name</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;UtilizationPercentage&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>min</span>(<span style=color:#a6e22e>Val</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>
</span></span></code></pre></div></p><p>Description :<br>You can compute the maximum value of a column value by giving the target column name to the <code>min()</code> function.</p></details></div><div><details><summary>Please tabulate the average UtilizationPercentage of the computers</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>InsightsMetrics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Name</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;UtilizationPercentage&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>avg</span>(<span style=color:#a6e22e>Val</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>bin</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#ae81ff>1</span><span style=color:#a6e22e>h</span>)
</span></span></code></pre></div></p><p>Description :<br>Aggregation with the <code>summarize</code> operator can be performed on multiple columns. This is a very common pattern, and allows you to aggregate the behavior of a particular resource over time by summing over the resource and time of interest.
If you simply use TimeGenerated for aggregation, the units will be too fine, so it is common to round up using the <code>bin()</code> function. The example rounds to the nearest hour, but you can also round to the nearest 10 minutes (10m), 100 seconds (100s), etc.</p></details></div><div><details><summary>Show top logic disks running out of space</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>InsightsMetrics</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Namespace</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;LogicalDisk&#34;</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>Name</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;FreeSpacePercentage&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>extend</span> <span style=color:#a6e22e>DiskInstance</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>tostring</span>(<span style=color:#a6e22e>parse_json</span>(<span style=color:#a6e22e>Tags</span>).[<span style=color:#e6db74>&#34;vm.azm.ms/mountId&#34;</span>])
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>FreeDiskSpace</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>avg</span>(<span style=color:#a6e22e>Val</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>DiskInstance</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>order</span> <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>FreeDiskSpace</span> <span style=color:#a6e22e>asc</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>take</span> <span style=color:#ae81ff>10</span>
</span></span></code></pre></div></p><p>Description :<br>The name of the performance counter for free disk space is <code>FreeSpacePercentage</code>. This example selects the 10 disks with the lowest average <code>FreeSpacePercentage</code> for the aggregated time period.
In the InsightsMetrics table, volume labels do not appear directly in the columns as values, but are included in the Tags column as JSON data.
For this reason, the <code>parse_json</code> function is used to parse the Tags column and set the label values of the retrieved volume as new column values with the <code>extend</code> operator.</p></details></div><div><details><summary>Show logic disks that are below the free space threshold</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>threshold</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>20</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>InsightsMetrics</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Namespace</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;LogicalDisk&#34;</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>Name</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;FreeSpacePercentage&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>extend</span> <span style=color:#a6e22e>DiskInstance</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>tostring</span>(<span style=color:#a6e22e>parse_json</span>(<span style=color:#a6e22e>Tags</span>).[<span style=color:#e6db74>&#34;vm.azm.ms/mountId&#34;</span>])
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>FreeDiskSpace</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>avg</span>(<span style=color:#a6e22e>Val</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>DiskInstance</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>FreeDiskSpace</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>threshold</span>
</span></span></code></pre></div></p><p>Description :<br>Displays disks whose free space is below a certain value. In this example, the threshold value is stored in a variable named threshold.
Variables can be used to make the query easy to modify, easy to reuse, and easy to understand.</p></details></div><div><details><summary>Count the number of events collected per computer</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Event</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>count</span>() <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>
</span></span></code></pre></div></p><p>Description :<br>Count the number of events collected per computer</p></details></div><div><details><summary>Count the number of events collected per computer over time</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Event</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>count</span>() <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>bin</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#ae81ff>1</span><span style=color:#a6e22e>h</span>), <span style=color:#a6e22e>Computer</span>
</span></span></code></pre></div></p><p>Description :<br>Count the number of events collected per computer, aggregated into 1 hour time buckets</p></details></div><div><details><summary>Show top 10 computers collecting events</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Event</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>count</span>() <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>top</span> <span style=color:#ae81ff>10</span> <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>
</span></span></code></pre></div></p><p>Description :<br>Count the number of events collected per computer, and then display the top 10 computers collecting events</p></details></div><div><details><summary>Show top processes across all machines</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Perf</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>ObjectName</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Process&#34;</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>CounterName</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;% Processor Time&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>AverageValue</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>avg</span>(<span style=color:#a6e22e>CounterValue</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>InstanceName</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>top</span> <span style=color:#ae81ff>10</span> <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>InstanceName</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>order</span> <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>AverageValue</span>
</span></span></code></pre></div></p><p>Description :<br>Summarize the <code>% Processor</code> Utilisation for processes across all servers, and list the top 10</p></details></div><h3 id=visualize>Visualize</h3><div><details><summary>Show event count as a chart</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>SecurityEvent</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>EventCount</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>count</span>() <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>EventID</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>top</span> <span style=color:#ae81ff>10</span> <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>EventCount</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>render</span> <span style=color:#a6e22e>columnchart</span> 
</span></span></code></pre></div></p><p>Description :<br>Use the render operator to draw a chart of the top 10 Security Events</p></details></div><div><details><summary>Show event count distribution over time</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>SecurityEvent</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>EventCount</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>count</span>() <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>bin</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#ae81ff>1</span><span style=color:#a6e22e>h</span>), <span style=color:#a6e22e>Computer</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>render</span> <span style=color:#a6e22e>timechart</span> 
</span></span></code></pre></div></p><p>Description :<br>Use the render operator to draw a chart of the security event distribution over time, per computer</p></details></div><div><details><summary>Show CPU Utilisation over time</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>InsightsMetrics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Namespace</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Processor&#34;</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>Name</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;UtilizationPercentage&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>AverageValue</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>avg</span>(<span style=color:#a6e22e>Val</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>bin</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#ae81ff>1</span><span style=color:#a6e22e>h</span>), <span style=color:#a6e22e>Computer</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>render</span> <span style=color:#a6e22e>timechart</span> <span style=color:#66d9ef>with</span> (<span style=color:#a6e22e>ycolumns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>series</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>AverageValue</span>)
</span></span></code></pre></div></p><p>Description :<br>Use the render operator to draw a chart of the processor utilisation over time with aggregations into 1 hour averages, broken down by computer</p></details></div><div><details><summary>Show Memory Utilisation over time</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>InsightsMetrics</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Namespace</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Memory&#34;</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>Name</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;AvailableMB&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>extend</span> <span style=color:#a6e22e>memorySizeMB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>toint</span>(<span style=color:#a6e22e>parse_json</span>(<span style=color:#a6e22e>Tags</span>).[<span style=color:#e6db74>&#34;vm.azm.ms/memorySizeMB&#34;</span>])
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>extend</span> <span style=color:#a6e22e>PercentageUsed</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span><span style=color:#f92672>-</span>(<span style=color:#a6e22e>Val</span><span style=color:#f92672>/</span><span style=color:#a6e22e>memorySizeMB</span>)<span style=color:#f92672>*</span><span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>AverageValue</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>avg</span>(<span style=color:#a6e22e>PercentageUsed</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>bin</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#ae81ff>30</span><span style=color:#a6e22e>m</span>), <span style=color:#a6e22e>Computer</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>render</span> <span style=color:#a6e22e>timechart</span>
</span></span></code></pre></div></p><p>Description :<br>Use the render operator to draw a chart of the percentage used memory over time with aggregations into 30 minute averages, broken down by computer. The memory used percentage is a calculated column, as only available memory in MB and total memory in MB is presented</p></details></div><div><details><summary>Show Pie graph of sources collected in Azure Diagnostics</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureDiagnostics</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>count</span>() <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>ResourceProvider</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>render</span> <span style=color:#a6e22e>piechart</span> 
</span></span></code></pre></div></p><p>Description :<br>Use the render operator to draw a chart of the different sources collected into Azure Diagnostics</p></details></div><div><details><summary>Show Pie graph of current missing updates in Update Management</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Update</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>UpdateState</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Needed&#34;</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>OSType</span><span style=color:#f92672>!=</span><span style=color:#e6db74>&#34;Linux&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span>  <span style=color:#a6e22e>arg_max</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#f92672>*</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Title</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> (<span style=color:#a6e22e>Classification</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Security Updates&#34;</span> <span style=color:#a6e22e>or</span> <span style=color:#a6e22e>Classification</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Critical Updates&#34;</span> <span style=color:#a6e22e>or</span> <span style=color:#a6e22e>Classification</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Definition Updates&#34;</span> <span style=color:#a6e22e>or</span> <span style=color:#a6e22e>Classification</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Others&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>MissingUpdates</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>count</span>() <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Classification</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>order</span> <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>MissingUpdates</span> <span style=color:#a6e22e>desc</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>render</span> <span style=color:#a6e22e>piechart</span> 
</span></span></code></pre></div></p><p>Description :<br>Use the render operator to draw a chart of the missing update count in Update Management</p></details></div><div><details><summary>Show Area Chart of Logic Apps Run Latency</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>AzureMetrics</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>ResourceProvider</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;MICROSOFT.LOGIC&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>MetricName</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;RunLatency&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>AverageLatency</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>avg</span>(<span style=color:#a6e22e>Average</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>bin</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#ae81ff>10</span><span style=color:#a6e22e>m</span>), <span style=color:#a6e22e>Resource</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>render</span> <span style=color:#a6e22e>areachart</span>
</span></span></code></pre></div></p><p>Description :<br>Use the render operator to draw a chart of run latency for logic apps</p></details></div><h3 id=cross-query>Cross query</h3><div><details><summary>Join VMComputer and InsightMetrics to get last heartbeat per computer</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>VMComputer</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>OperatingSystemFullName</span>, <span style=color:#a6e22e>_ResourceId</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>join</span> (
</span></span><span style=display:flex><span><span style=color:#a6e22e>InsightsMetrics</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>Name</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Heartbeat&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>LastHeartbeat</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>arg_max</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#f92672>*</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>_ResourceId</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>LastHeartbeat</span>, <span style=color:#a6e22e>_ResourceId</span>
</span></span><span style=display:flex><span>) <span style=color:#a6e22e>on</span> <span style=color:#a6e22e>_ResourceId</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span><span style=color:#f92672>-</span><span style=color:#a6e22e>away</span> <span style=color:#a6e22e>_ResourceId1</span>
</span></span></code></pre></div></p><p>Description :<br>Use the join operator to join two tables to see last heartbeat per computer</p></details></div><div><details><summary>Join two queries from the SecurityEvents table together to determine logon duration</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>SecurityEvent</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>EventID</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>4624</span>		<span style=color:#75715e>// sign-in events
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>Account</span>, <span style=color:#a6e22e>TargetLogonId</span>, <span style=color:#a6e22e>LogonTime</span><span style=color:#f92672>=</span><span style=color:#a6e22e>TimeGenerated</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>join</span> <span style=color:#a6e22e>kind</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>inner</span> (
</span></span><span style=display:flex><span><span style=color:#a6e22e>SecurityEvent</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>EventID</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>4634</span>		<span style=color:#75715e>// sign-out events
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>TargetLogonId</span>, <span style=color:#a6e22e>LogoffTime</span><span style=color:#f92672>=</span><span style=color:#a6e22e>TimeGenerated</span>
</span></span><span style=display:flex><span>    ) <span style=color:#a6e22e>on</span> <span style=color:#a6e22e>TargetLogonId</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>extend</span> <span style=color:#a6e22e>Duration</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>LogoffTime</span><span style=color:#f92672>-</span><span style=color:#a6e22e>LogonTime</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span><span style=color:#f92672>-</span><span style=color:#a6e22e>away</span> <span style=color:#a6e22e>TargetLogonId1</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>top</span> <span style=color:#ae81ff>10</span> <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Duration</span> <span style=color:#a6e22e>desc</span>
</span></span></code></pre></div></p><p>Description :<br>Use the join operator to join two queries from the SecurityEvents table together to determine logon duration</p></details></div><div><details><summary>Join Heartbeat table with Update Management table to view update status</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Update</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>OSType</span><span style=color:#f92672>!=</span><span style=color:#e6db74>&#34;Linux&#34;</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>Optional</span><span style=color:#f92672>==</span><span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>hint</span>.<span style=color:#a6e22e>strategy</span><span style=color:#f92672>=</span><span style=color:#a6e22e>partitioned</span> <span style=color:#a6e22e>arg_max</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#f92672>*</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>,<span style=color:#a6e22e>SourceComputerId</span>,<span style=color:#a6e22e>UpdateID</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>UpdateState</span><span style=color:#f92672>=~</span><span style=color:#e6db74>&#34;Needed&#34;</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>Approved</span><span style=color:#f92672>!=</span><span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>join</span> (<span style=color:#a6e22e>UpdateSummary</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>arg_max</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#f92672>*</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>OsVersion</span>, <span style=color:#a6e22e>RestartPending</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>OsVersion</span>, <span style=color:#a6e22e>RestartPending</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>on</span> <span style=color:#a6e22e>Computer</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>join</span> ( <span style=color:#a6e22e>Heartbeat</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>LastHeartBeat</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>arg_max</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#f92672>*</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>LastHeartBeat</span>, <span style=color:#a6e22e>Computer</span>
</span></span><span style=display:flex><span>) <span style=color:#a6e22e>on</span> <span style=color:#a6e22e>Computer</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>arg_max</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#f92672>*</span>), <span style=color:#a6e22e>SecurityUpdates</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>countif</span>(<span style=color:#a6e22e>Classification</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Security Updates&#34;</span>), <span style=color:#a6e22e>CriticalUpdates</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>countif</span>(<span style=color:#a6e22e>Classification</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Critical Updates&#34;</span>), <span style=color:#a6e22e>DefinitionUpdates</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>countif</span>(<span style=color:#a6e22e>Classification</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Definition Updates&#34;</span>), <span style=color:#a6e22e>ServicePacks</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>countif</span>(<span style=color:#a6e22e>Classification</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Service Packs&#34;</span>), <span style=color:#a6e22e>Others</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>countif</span>(<span style=color:#a6e22e>Classification</span> <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#34;Security Updates&#34;</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>Classification</span> <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#34;Critical Updates&#34;</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>Classification</span> <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#34;Definition Updates&#34;</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>Classification</span> <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#34;Service Packs&#34;</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>OsVersion</span>, <span style=color:#a6e22e>RestartPending</span>, <span style=color:#a6e22e>ResourceId</span>, <span style=color:#a6e22e>LastHeartBeat</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>ResourceId</span>, <span style=color:#a6e22e>OsVersion</span>, <span style=color:#a6e22e>RestartPending</span>, <span style=color:#a6e22e>LastHeartBeat</span>, <span style=color:#a6e22e>SecurityUpdates</span>, <span style=color:#a6e22e>CriticalUpdates</span>, <span style=color:#a6e22e>DefinitionUpdates</span>, <span style=color:#a6e22e>ServicePacks</span>, <span style=color:#a6e22e>Others</span>
</span></span></code></pre></div></p><p>Description :<br>Use the join operator to join Heartbeat table to Update Management table to view update status, last heartbeat and reboot status</p></details></div><div><details><summary>Join Heartbeat table with syslog table to get count of syslog events</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Heartbeat</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>arg_max</span>(<span style=color:#a6e22e>TimeGenerated</span>, <span style=color:#f92672>*</span>) <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>_ResourceId</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>join</span> (
</span></span><span style=display:flex><span><span style=color:#a6e22e>Syslog</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>summarize</span> <span style=color:#a6e22e>SyslogCount</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>count</span>() <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>_ResourceId</span>
</span></span><span style=display:flex><span>) <span style=color:#a6e22e>on</span> <span style=color:#a6e22e>_ResourceId</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>_ResourceId</span>, <span style=color:#a6e22e>Computer</span>, <span style=color:#a6e22e>ComputerIP</span>, <span style=color:#a6e22e>OSName</span>, <span style=color:#a6e22e>ResourceGroup</span>, <span style=color:#a6e22e>SubscriptionId</span>, <span style=color:#a6e22e>SyslogCount</span>
</span></span></code></pre></div></p><p>Description :<br>Use the join operator to join Heartbeat table to syslog table to get a count of events per computer</p></details></div><h3 id=other>Other</h3><div><details><summary>Obtain a list of IP prefixes contained in the service tag</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>serviceName</span><span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;VirtualDesktop&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>externaldata</span>(<span style=color:#a6e22e>changeNumber</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>, <span style=color:#a6e22e>cloud</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>, <span style=color:#a6e22e>values</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dynamic</span>)[<span style=color:#e6db74>&#34;https://download.microsoft.com/download/7/1/D/71D86715-5596-4529-9B13-DA13A5DE5B63/ServiceTags_Public_20220228.json&#34;</span>]  <span style=color:#66d9ef>with</span>(<span style=color:#a6e22e>format</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;multijson&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>mv</span><span style=color:#f92672>-</span><span style=color:#a6e22e>expand</span> <span style=color:#a6e22e>values</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>where</span> <span style=color:#a6e22e>values</span> <span style=color:#a6e22e>contains</span> <span style=color:#a6e22e>serviceName</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>mv</span><span style=color:#f92672>-</span><span style=color:#a6e22e>expand</span> <span style=color:#a6e22e>values</span>.<span style=color:#a6e22e>properties</span>.<span style=color:#a6e22e>addressPrefixes</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>project</span> <span style=color:#a6e22e>addressPrefixes</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>tostring</span>( <span style=color:#a6e22e>values_properties_addressPrefixes</span>)
</span></span></code></pre></div></p><p>Description :<br><p>IP addresses used by Azure services are published as service tags and can be referenced from the Internet.
The <code>externaldata</code> operator retrieves data described in CSV, JSON, etc. from an external storage account. This sample retrieves files directly from the Internet, but SAS can be used to retrieve data from storage accounts to which access is controlled.</p><p>Note - The file name ServiceTags_Public_YYYYYMMDD.json will change as the IP list is updated, so you must always refer to the new file.<br><a href="https://www.microsoft.com/en-us/download/details.aspx?id=56519">Azure IP Ranges and Service Tags – Public Cloud</a></p><p>The files referenced by KQL should be placed in a storage account that you manage yourself, and you should consider a mechanism whereby the files in the storage account are automatically updated whenever the list is updated.
<a href=https://techcommunity.microsoft.com/t5/microsoft-sentinel-blog/using-external-data-sources-to-enrich-network-logs-using-azure/ba-p/1450345>Using external data sources to enrich network logs using Azure storage and KQL</a></p></p></details></div><div><details><summary>Quickly check the results of calculations for dates, strings, etc.</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>print</span> <span style=color:#a6e22e>now</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>print</span> <span style=color:#a6e22e>now</span>(<span style=color:#ae81ff>9</span><span style=color:#a6e22e>h</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>print</span> <span style=color:#a6e22e>ago</span>(<span style=color:#ae81ff>9</span><span style=color:#a6e22e>h</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>print</span> <span style=color:#a6e22e>substring</span>(<span style=color:#e6db74>&#34;hello KQL world&#34;</span>,<span style=color:#ae81ff>6</span>,<span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>print</span>  <span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>print</span> <span style=color:#a6e22e>iif</span>(<span style=color:#66d9ef>true</span>, <span style=color:#ae81ff>100</span> , <span style=color:#ae81ff>200</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>print</span> <span style=color:#a6e22e>iif</span>(<span style=color:#66d9ef>false</span>, <span style=color:#ae81ff>100</span> , <span style=color:#ae81ff>200</span>)
</span></span></code></pre></div></p><p>Description :<br>The <code>print</code> operator performs scalar expressions (calculations that do not create a table with multiple rows). It is useful when including time or string calculations in a long query, and you want to see the results of a partial calculation beforehand.</p></details></div><div class=section-index></div><div class="text-muted mt-5 pt-3 border-top">Last modified June 13, 2022: <a href=https://github.com/tsubasaxZZZ/fta-hackon2022/commit/2a0a62fe3e1d45f1f066318a901412089b2e78b9>Copy from HackOn repository (2a0a62f)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/tsubasaxZZZ/fta-hackon2022 aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/fta-hackon2022/js/tabpane-persist.js></script>
<script src=/fta-hackon2022/js/main.min.9dedb4cb1735665f9e5f74805a267db6a8e16f899c40f6135e9be8787b1b8d0d.js integrity="sha256-ne20yxc1Zl+eX3SAWiZ9tqjhb4mcQPYTXpvoeHsbjQ0=" crossorigin=anonymous></script></body></html>